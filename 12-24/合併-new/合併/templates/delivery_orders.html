<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>配送訂單管理</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='Delivery_style.css') }}">
    <style>
        /* 新增樣式：將按鈕放在右上角 */
        .edit-button {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: #4CAF50;
            color: white;
            padding: 8px 12px;
            text-decoration: none;
            border-radius: 4px;
        }
        .edit-button:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>
    <h1>配送訂單管理</h1>

    <!-- 編輯個人資料按鈕 -->
    <a href="{{ url_for('edit_delivery_info') }}" class="edit-button">編輯個人資料</a>



    <!-- 配送訂單表格 -->
    <table border="1" cellspacing="0" cellpadding="8">
        
        <thead>
            <tr>
                <th>訂單編號</th>
                <th>送貨員 ID</th>
                <th>送貨員名稱</th>
                <th>餐廳地址</th>
                <th>顧客地址</th>
                <th>取貨時間</th>
                <th>配送完成時間</th>
                <th>價格</th> <!-- 新增價格欄位 -->
                <th>狀態</th>
                <th>操作</th>
            </tr>
        </thead>
        <tbody>
            {% for order in orders %}
            <tr>
                <td>{{ order.I_id }}</td>
                <td>{{ order.D_id or "未指派" }}</td>
                <td>{{ order.D_name or "未指派" }}</td>
                <td>{{ order.restaurant_address or "未提供" }}</td>
                <td>{{ order.customer_address or "未提供" }}</td>
                <td>{{ order.D_pickup_time or "未取貨" }}</td>
                <td>{{ order.D_delivery_time or "未完成" }}</td>
                <td>{{ order.price or "未提供" }}</td> <!-- 顯示價格 -->
                <td>{{ order.status }}</td>
                <td>
                    {% if order.status == "待接單" %}
                        <form method="POST" action="{{ url_for('accept_order', item_id=order.I_id) }}">
                            <button class="btn" type="submit">接單</button>
                        </form>
                    {% elif order.status == "配送中" %}
                        <form method="POST" action="{{ url_for('complete_order', item_id=order.I_id) }}">
                            <button class="btn btn-complete" type="submit">完成</button>
                        </form>
                    {% else %}
                        <span>已完成</span>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
        
        
        </table>
        
    </table>

    <a href="{{ url_for('logout') }}">登出</a>
</body>
</html>
